% !TEX root = ../report.tex
\chapter{Discussion}
I this chapter the results of \autoref{chap:results} will be discussed. The three parts of this semester project, namely map merging, culling and optimization, will be discusses each in an own section as their ideas are independent from each other.

\section{Map merging}
In \autoref{tab:res_1} one can see, that wiht only three \acp{KFM} the \ac{RMSE} gets higher which may result from the fact that with only three \acp{KFM} not much more information is gained while the computational effort is increased, as the transformation for every \ac{KFM} is calculated and optimized. If this increased computational effort occurs more or less at once, this could lead to short time overload of the system which then results in a higher \ac{RMSE}. The fact that the \ac{RMSE} is decreased if \acp{KF} are skipped supports this reasoning as with skipped \acp{KF} the increased computational effort is more spread over time because the time between the transformation for the \acp{KFM} are calculated and optimized is increased due to the skipping of \acp{KF}.

The setting with five \acp{KFM} and no \acp{KF} skipped also results in a worse \ac{RMSE} which could be explained with the same reason mentioned above.

The settings with five and more \acp{KFM} and skipped \acp{KF} results in a lower \ac{RMSE} and therefore a higher accuracy compared to the old approach.\\

The selected settings which will also be evaluated with other data sets are listed in \autoref{tab:dis_settings}.

\begin{table}[ht!]
  \begin{center}
  \begin{tabular}{r|r}
    \# of \acp{KFM} & \# of \acp{KF} skipped  \\ 
    \hline 
    5 & 20 \\ 
    10 & 5 \\ 
    10 & 10 \\ 
  \end{tabular} 
  \end{center}
  \caption{The selected settings}
  \label{tab:dis_settings}
\end{table}

The selected settings are may not the ones performing best on the first data set (vi\_loop\_close) but they are well suited for other data sets as they e.g. do not skipp too many \acp{KF} or do not require too many \acp{KFM} which could lead to no map merging in data sets with less overlap.\\

In \autoref{tab:res_2} and \autoref{tab:res_3} one can see, that the \ac{RMSE} is also decreased for the selected settings with the data sets vi\_loop\_far, respective vi\_loop\_uav.\\

The presented results show, that with the usage of multiple \acp{KFM} and the skipping of \acp{KF}, the \ac{RMSE} can be reduced, respective the accuracy is increased.

\section{Culling}

With enabled culling the amount of edges and vertices the \ac{PGO} and the \ac{BA} algorithms have to process is reduced significantly compared to when culling is disabled, as shown in \autoref{tab:res_4}, \autoref{tab:res_5}, \autoref{tab:res_percentage_1} and \autoref{tab:res_percentage_2}.

The reduction in edges and vertices then results in a decrease of the runtime as shown in \autoref{tab:res_timing_1} and \autoref{tab:res_timing_2}\\

As the culling removes information one has to be careful not to remove to many information. With a redundancy threshold of 90\% the accuracy of the setting with 10 \acp{KFM} and 10 \ac{KF} skipped got worse as shown in \autoref{tab:res_6}. Because of this reason another experiment with a redundancy threshold of 94\% was performed which showed a satisfactory result, shown in \autoref{tab:res_7}.\\

With the right choice of the redundancy threshold, the number of edges and vertices in the optimization can be reduced significantly which results in a reduced runtime while achieving the same accuracy. 

\section{Optimization}

The timing of both optimization procedures (\ac{PGO} and \ac{BA}) with the \ac{LM} and the \ac{DL} algorithm were recorded and presented in \autoref{tab:res_timing_2}, \autoref{tab:res_timing_3}, \autoref{tab:res_timing_4} and \autoref{tab:res_timing_5}

The results, listed in \autoref{tab:res_timing_6} and \autoref{tab:res_timing_7}, have shown, that the best results are achieved if for the \ac{PGO} the \ac{LM} algorithm and for the \ac{BA} the \ac{DL} algorithm is used.\\

That only the \ac{BA} performs better with the \ac{DL} algorithm may comes from the fact, that the \ac{BA} is a large scale, classically non-linear, optimization problem \cite{Lourakis2005, Triggs2000}, whereas the \ac{PGO} in comparison is a smaller optimization problem, as the \acp{MP} stay fixed and are not optimized and the \ac{LM} algorithm performs better for smaller optimization problems.\\

With the change of the \ac{BA} from using the \ac{DL} algorithm instead of the \ac{LM} algorithm the runtime of the optimization was decreased and therefore also the runtime of the whole system.

